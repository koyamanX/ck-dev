<!doctype html><html lang=en><meta charset=utf-8><meta name=generator content="Hugo 0.82.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Booting linux kernel on my RISC-V part2&nbsp;&ndash;&nbsp;ck-dev</title><link rel=stylesheet href=https://koyamanx.github.io/ck-dev/css/core.min.3ad30501c32a51e6255508e9b30685dba7abb22436bad9f6836882eb9a79698ca0598981990d0789c1808e089fbf7176.css integrity=sha384-OtMFAcMqUeYlVQjpswaF26ersiQ2utn2g2iC65p5aYygWYmBmQ0HicGAjgifv3F2><meta name=twitter:card content="summary"><meta name=twitter:title content="Booting linux kernel on my RISC-V part2"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=https://koyamanx.github.io/ck-dev/><span class="site name">ck-dev</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=https://koyamanx.github.io/ck-dev/categories/>Categories</a><a class="nav item" href=https://koyamanx.github.io/ck-dev/tags/>Tags</a><a class="nav item" href=https://koyamanx.github.io/ck-dev/about>About</a></nav></div></span></div><div class="site slogan"><span class=title>Notes for myself</span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Booting linux kernel on my RISC-V part2</h1><p class="article date">Monday, March 22, 2021</p></section><article class="article markdown-body"><p><a href=https://koyamanx.github.io/ck-dev/blog/booting_linux_kernel_on_my_riscv_part1/>前回</a>
で起きた、<code>riscv-int</code>の初期化中?のハングの原因を見ていく。</p><h2 id=問題点>問題点</h2><p>前回のLinuxの実行ログ。</p><p><span class=image-container><span class=link><a href=./image00.png target=_blank><img class=img src=./image00.png></a></span></span>
<span class=image-container><span class=link><a href=./image01.png target=_blank><img class=img src=./image01.png></a></span></span></p><p><code>riscv-int</code>の出力のあと、シミュレータがハングしているようである。</p><h2 id=原因に目星をつける>原因に目星をつける。</h2><p><code>riscv-int</code>が32 local interruptsを持っていると認識したということは、FDTを読んで、デバイスドライバの選択をし、初期化を始めたはず。
考えられる原因として、</p><ul><li>割込みコントローラーのロード・ストアアクセスフォルト(アドレスのレンジを超えた？)</li><li>デバイスツリーの記述ミス</li></ul><p>あたりかなと思う。</p><p>一先ず、Linux kernelが<code>riscv-int</code>に対して何をしてるのか調べてみることから始める。</p></article><section class="article labels"><a class=category href=https://koyamanx.github.io/ck-dev/categories/linux/>Linux</a><a class=tag href=https://koyamanx.github.io/ck-dev/tags/linux/>Linux</a><a class=tag href=https://koyamanx.github.io/ck-dev/tags/risc-v/>RISC-V</a><a class=tag href=https://koyamanx.github.io/ck-dev/tags/cpu/>CPU</a></section><div class="article share addthis_inline_share_toolbox"></div><script defer src="https://koyamanx.github.io/ck-dev/js/addthis_widget.min.99872df1091f055fca553e0b74b13c09bd383ef42b1c56a9edb651a91f122d56e7bc9a2fad73528246215b379b043226.js#pubid=x-1234567890" integrity=sha384-mYct8QkfBV/KVT4LdLE8Cb04PvQrHFap7bZRqR8SLVbnvJovrXNSgkYhWzebBDIm></script></div><div class="article bottom"><section class="article navigation"><p><a class=link href=https://koyamanx.github.io/ck-dev/blog/reading_linux_kernel_part1/><span class="iconfont icon-article"></span>Reading linux kernel part1</a></p><p><a class=link href=https://koyamanx.github.io/ck-dev/blog/reading_opensbi_part7/><span class="iconfont icon-article"></span>Reading OpenSBI part7</a></p></section></div></section><section id=footer><div class=footer-wrap><p class=copyright>©2021 koyamanX</p><p class=powerby><span>Powered&nbsp;by&nbsp;</span><a href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a><span>&nbsp;&&nbsp;</span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank rel="noopener noreferrer">Notepadium</a></p></div></section></body></html>